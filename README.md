# Authrite-Express

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

## Overview

Authrite is a system for mutual authentication over a communications channel where both parties come to know the identity of the counterparty.
**authrite-express** provides a way to easily add mutual authentication to the routes of an express server.

During setup, the client asks for some basic information from the server and provides their identity key. The server sends back a reply, proving custody over the identity key they send back. Then, every message sent between the two parties is signed and verified, enabling everyone to have confidence in message integrity. Messages are not encrypted by Authrite, but encryption can occur on another layer like HTTPS.

## [Example Usage](#example-usuage)

This example demonstrates creating a simple express server that makes use of the **authrite-express** middleware.

```js
const authrite = require('authrite-express')
const express = require('express')
const app = express()
const port = 5000

const TEST_SERVER_PRIVATE_KEY = 
'6dcc124be5f382be631d49ba12f61adbce33a5ac14f6ddee12de25272f943f8b'
const TEST_SERVER_BASEURL = `http://localhost:${port}`

// Configure the express server to use the authrite middleware
app.use(authrite.middleware({
    serverPrivateKey: TEST_SERVER_PRIVATE_KEY,
    baseUrl: TEST_SERVER_BASEURL
}))

// Example Routes
app.get('/getData', (req, res) => {
    res.json({ user: 'bob' })
}) 
app.post('/sendSomeData', (req, res) => {
    res.json({
        message: 'Hello, this is the server.',
        clientData: req.body
    })
})

app.listen(port, () => {
  console.log(`Example app listening on port ${port}`)
})
```

## middleware

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

*   [middleware](#middleware)
    *   [Parameters](#parameters)

### middleware

Authrite express middleware for providing mutual authentication with a client

#### Parameters

*   `config` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Configures the middleware with initial parameters (optional, default `{}`)

    *   `config.serverPrivateKey` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** The server's private key used for derivations
    *   `config.baseUrl` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** The base url of the express server
    *   `config.initialRequestPath` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** The initial route path used to request the server's information and identity key

Returns **[function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** Which can be used as authentication middleware in an express server

## License

The license for the code in this repository is the Open BSV License.
